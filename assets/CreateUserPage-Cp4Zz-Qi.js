import{r as m,z as g,j as e,D as F,E as o,G as n,H as l,J as i,I as d,K as c,B as w,N as y,F as E}from"./index-B8aywGUI.js";import{L as C}from"./loader-circle-CjdA97Rq.js";const S=()=>{const[x,u]=m.useState(""),[j,h]=m.useState(""),[r,p]=m.useState(!1),a=g({defaultValues:{email:"",password:"",firstName:"",lastName:""}}),f=async s=>{u(""),h(""),p(!0);const N="http://localhost:3001/api/users";try{const t=await fetch(N,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),b=await t.json();if(!t.ok)throw new Error(b.error||`HTTP error! status: ${t.status}`);u(`Utilisateur créé avec succès ! ID: ${b.id}`),a.reset()}catch(t){console.error("Erreur lors de la création de l'utilisateur:",t),h(t.message||"Une erreur est survenue.")}finally{p(!1)}};return e.jsxs("div",{className:"max-w-md mx-auto mt-10 p-6 bg-card text-card-foreground rounded-lg shadow-md border border-border",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Créer un nouvel utilisateur"}),e.jsx(F,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(f),className:"space-y-6",children:[e.jsx(o,{control:a.control,name:"email",rules:{required:"Email est requis"},render:({field:s})=>e.jsxs(n,{children:[e.jsx(l,{children:"Email"}),e.jsx(i,{children:e.jsx(d,{type:"email",placeholder:"nom@exemple.com",...s,disabled:r})}),e.jsx(c,{})]})}),e.jsx(o,{control:a.control,name:"firstName",render:({field:s})=>e.jsxs(n,{children:[e.jsx(l,{children:"Prénom (optionnel)"}),e.jsx(i,{children:e.jsx(d,{placeholder:"Votre prénom",...s,disabled:r})}),e.jsx(c,{})]})}),e.jsx(o,{control:a.control,name:"lastName",render:({field:s})=>e.jsxs(n,{children:[e.jsx(l,{children:"Nom (optionnel)"}),e.jsx(i,{children:e.jsx(d,{placeholder:"Votre nom de famille",...s,disabled:r})}),e.jsx(c,{})]})}),e.jsx(o,{control:a.control,name:"password",rules:{required:"Mot de passe est requis"},render:({field:s})=>e.jsxs(n,{children:[e.jsx(l,{children:"Mot de passe"}),e.jsx(i,{children:e.jsx(d,{type:"password",placeholder:"********",...s,disabled:r})}),e.jsx(c,{})]})}),e.jsxs(w,{type:"submit",className:"w-full",disabled:r,children:[r&&e.jsx(C,{className:"mr-2 h-4 w-4 animate-spin"}),r?"Création...":"Créer Utilisateur"]})]})}),x&&e.jsx("p",{className:"mt-4 text-sm text-green-600",children:x}),j&&e.jsxs("p",{className:"mt-4 text-sm text-red-600",children:["Erreur: ",j]})]})},L=()=>e.jsxs(e.Fragment,{children:[e.jsx(y,{}),e.jsxs("main",{className:"pt-20 min-h-screen",children:[" ",e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[" ",e.jsx(S,{})]})]}),e.jsx(E,{})]});export{L as default};
