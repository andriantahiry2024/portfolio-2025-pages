import{c as y,l as k,u as L,r as n,j as e,N as x,B as h,F as f,m as E,a as P,e as B,U as C}from"./index-B8aywGUI.js";import{L as S}from"./loader-circle-CjdA97Rq.js";/**
 * @license lucide-react v0.394.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=y("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),D=s=>{if(!s)return"";if(typeof s=="string"&&(s.includes("&lt;")||s.includes("&gt;"))){const r=document.createElement("textarea");return r.innerHTML=s,r.value}return s},A=()=>{var i,m;const{slug:s}=k(),r=L(),[t,j]=n.useState(null),[p,l]=n.useState(!0),[c,o]=n.useState(null);n.useEffect(()=>{(async()=>{if(!s){o("Slug manquant dans l'URL."),l(!1);return}l(!0),o(null);const b=`http://localhost:3001/api/posts/${s}`;try{const a=await fetch(b);if(!a.ok){if(a.status===404)throw new Error("Article non trouvé.");const w=await a.json();throw new Error(w.error||`HTTP error! status: ${a.status}`)}const v=await a.json();j(v)}catch(a){console.error("Erreur lors de la récupération de l'article:",a),o(a.message||"Impossible de charger l'article.")}finally{l(!1)}})()},[s]);const g=d=>{const u={year:"numeric",month:"long",day:"numeric"};return new Date(d).toLocaleDateString("fr-FR",u)};if(p)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(S,{className:"h-8 w-8 animate-spin"})});if(c)return e.jsxs("div",{className:"min-h-screen bg-background text-foreground",children:[e.jsx(x,{}),e.jsx("main",{className:"pt-24 pb-20",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4 text-destructive",children:"Erreur"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:c}),e.jsx(h,{onClick:()=>r("/blog"),children:"Retour au Blog"})]})}),e.jsx(f,{})]});if(!t)return null;const N=D(t.content);return e.jsxs("div",{className:"min-h-screen bg-background text-foreground",children:[e.jsx(x,{}),e.jsx("main",{className:"pt-24 pb-20",children:e.jsxs("div",{className:"container mx-auto px-4 max-w-3xl",children:[e.jsx("div",{className:"mb-8",children:e.jsxs(h,{variant:"ghost",onClick:()=>r("/blog"),className:"flex items-center",children:[e.jsx(U,{className:"mr-2 h-4 w-4"})," Retour au Blog"]})}),e.jsxs(E.article,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsxs("header",{className:"mb-8",children:[t.category&&e.jsx(P,{className:"mb-2",children:t.category}),e.jsx("h1",{className:"text-4xl font-bold tracking-tight lg:text-5xl mb-4",children:t.title}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground space-x-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(B,{className:"h-4 w-4 mr-1"}),e.jsxs("span",{children:["Publié le ",g(t.createdAt)]})]}),(((i=t.author)==null?void 0:i.firstName)||((m=t.author)==null?void 0:m.lastName))&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(C,{className:"h-4 w-4 mr-1"}),e.jsxs("span",{children:["Par ",t.author.firstName," ",t.author.lastName]})]})]})]}),e.jsx("div",{className:"prose prose-base dark:prose-invert max-w-none blog-content",dangerouslySetInnerHTML:{__html:N}})]})]})}),e.jsx(f,{})]})};export{A as default};
